# Section 3

---

## Chapter 14: Create and upload your first program

---

In this chapter you will learn about:

* * 




I think we can move on to doing some actual playing around with the mBot now using mBlock. I know we didn't spend much time with scratch but I'm thinking we've got a whole robot here. Why just play with his pride? \[chuckles\] Have a look at scripts again, look down at the right bottom corner of the scripts menu. You see that there's a robot section. Under robots, once you select it, there's an mBot section which contains all of the different programming blocks that we can use with the mBot.

Let's have a quick look at some of those blocks. See for example the first one says run forwards. We can also change that to backwards right or left at a particular speed. Now, there's another one that allows you to control motors several motors LEDs like this one, the onboard LEDs. Let's see further down, we've got things such as a seven-segment display and a light sensor camera shadow, there's a onboard button as well that we can read, an ultrasonic sensor and lots of other blocks.

Out of the box, the mBot only comes with a number of capabilities based on sensors or motors or other attachments. For example, you can see here, there is the ultrasonic sensor, down here is the line follow on, inside the box, there is a light intensity sensor as well. As far as outputs are concerned or actuators, you've got things like the two motors which are connected to the two individual ports, one port for each motor. You also have the RGB LEDs, we consider those to be outputs that do something to the environment, that change the environment. We also have an infrared sensor here as well which I forgot to mention earlier.

These are the capabilities that the mBot comes with out of the box, but apart from those, you can purchase additional components and plug them onto your mBot and the mBlock extension for mBlocks gives you the ability to interact and use those additional components as well. For example, the mBot as it comes out of the box does not have a sound sensor but you can actually purchase one separately. Then you'll bee able to use this block here to interact with a sound sensor which is simply in microphone. You can, for example, clap and get your mBot to react to that clapping. You can also have a 3-axis gyroscope, for example, which is very good for detecting, changing in direction. You can use that information to get your robot to know when, for example, it's upside-down, things like that.

For this crash course on the mBot of course, we will be focusing on the capabilities that the mBot comes with out of the box without any additional components. We will not be looking at most of these blocks. Now to proceed, I'm first going to create a new mBlock program by going into File and I don't need to save the current progress, I'm just going to throw it out and work inside the robots section of the scripts tab. Every mBot program must start with this header. This block represents a mBot program, and that is how the mBlock application knows that it's a special kind of program. It's not there to control its pride, but it's there to control the mBot.

We always start with the mBot program header block. Below it, we can attach other compatible blocks. For example, let's say that I would like to change the color of the two onboard RGB LEDs these are color LEDs, LEDs that allow you to produce any color you like. There's a little block here called set LED onboard to a particular color. I can drag this and connect it to my mBot header. I can fine tune or I can configure this block by choosing which ones of the two LEDs I would like to manipulate. I can manipulate both, or just the left or just the right. Let's go for both for now. Then I need to give it a color. If I change the red component all the way to 255, going to do that now, then my two LEDs will be bright red. Then I can mix other colors as well. I can mix green and blue with the red. Through the combination of the three basic colors, I can create other composite colors but let's go for just red now.

Now the next step of course, let's say that this is the program that I would like to upload to my mBot, the next step in order to get the upload to work, is to connect the USB cable to the USB port of the mBot like that. I know that the connection has taken place because there's a red LED here indicates that we've got power from the USB. But that's not enough power to power the robot. Once you plug in the cable, then you need to turn on the robot by flipping the switch to on. Now, the robot is ready to be programmed.

The next step is to go to Connect menu and look for the serial port that your mBot is connected to the computer by. It's always going to be a port that has a number larger than one. Because COM1 is typically used by the operating system itself. In my case, COM4 is the port to which the mBot is connected. I'm going to choose COM4 here. Next, I'm going to do a right click on the mBot program header and choose "Upload to Arduino". Remember how I told you that inside the mBot, you've got an Arduino?

Some people get confused about this, they're saying, "What's the Arduino? I'm trying to program my mBot." It should be saying "Upload to mBot", right? We're saying "Upload to Arduino" because inside the mBot, you have an Arduino. Let's do that "Upload to Arduino". But doing that you've got the uploading component of the mBlock application. What you see here is the translation of the simple scratch-based program into Arduino sketch into Arduino code. The translation is one-to-one. You've got a lot of code here, but most of this code just the infrastructure for supporting the functionality that you've selected in your mBot program.

We want our mBot to just turn the two LEDs into red and this is the block that does that. Everything else that you see here is just in support of that one single thing. In fact, if you have a look inside this line, line 34, you'll see the programming code that actually turns these two LEDs into red. No need to get into the specifics now but this is what causes the LEDs to become red. Everything else is just there to support these two lines of code.

First, you set the color and then you turn the LEDs on with that color. That's all there is. You'll see that as I'm dropping other things, other components, other blocks into my program like this one here, for example, notice that another little instruction was added at the end of my program. If I put it say, up here, notice that the move command now moved at the beginning just before the RGB commands.

The mBlock makes programming easy by providing an interface for us programmers to use a graphical language instead of the traditional text-based language that people are used to using for programming a computer. In any case, as we're just starting now we can completely ignore all these, it makes absolutely no difference to us, you can ignore all that down here as well this part of the user interface. What we need to do is to just click on this button, "Upload to Arduino" just to finish up this whole job. Upload to Arduino, please connect to serial port, I forgot about that.

Again I've got to go back to serial port and choose COM4. Somehow this got disconnected, I'm going to click on "Upload to Arduino" now again. You can see that the uploading has started, there's a lot of texts flowing through. The mBlock application is now compiling the Arduino code using the embedded compiler, compiler is responsible for translating the text into a binary format that the Arduino can understand. I've got upload finish, you can see a nice bright red set of LEDs on the mBot. Let's do this one more time, how about now to make this programming component of mBlock disappear, I just click on "back".

Let's change the LEDs to green. I'm going to make the red component zero and I'm going to make the green component 255. Just like before, I'm going to do a right-click to upload the Arduino, and then again click on the "Upload to Arduino" button. Uploading, verifying and there you go, you've got your two LEDs green. How about I do another Arduino thing, what I'd like to do is to have let's say that right LED to be green and the left one to be blue. I'm going to leave the green here, the green component that's 255 and I'm going to change the LED onboard to be right. I'm going to right-click on the LED block and duplicate it, get another one of those. I will attach it down the bottom of the previous LED onboard block, then I'll change the right LED to left and make the green component zero and the blue component 255.

All the changes that I've just made were automatically inserted in text, the Arduino sketch on the right side. Since I'm already looking at the programming component of the mBlock application, I don't have to go back and redo that, you can see the option to go and upload to the Arduino does not exist here. I can just click on "Upload to the Arduino" button and the upload process will begin.

Here you go, I've got a blue on the right side and a green LED on the left side. How about you try a little variation on this, how about you experiment by creating different colors for each one of the LED. I would like to experiment by combining different values of red, green and blue. Just remember that you're not confined to using those values from the drop-down, you can actually go and change that to an arbitrary value for example 36. To select a color that you like, what you can do is you can use an online color wheel, here's one, for example, you can google for these things this is not the only one.

You can pick a color from the color chooser, let's say you'd like a shade of green, for example, and you can see the values for the red, green and blue component. I would like it to experiment a little bit with this and just create a couple of colors by using this color chooser and getting the mBot IGB LEDs to recreate that color. This will also give you a little bit of practice of uploading a program to the mBot. After that take a break and then we come back from the break, I'm going to show you how to play around with the mortars.

