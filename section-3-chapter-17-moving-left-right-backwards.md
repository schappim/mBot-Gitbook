# Section 3

---

## Chapter 17: Moving left, right, backwards

---

In this chapter you will learn:

* 1

---

Now, we've got an mBot that moves forwards for five seconds at speed 125 and then it stops. How about give it the ability to turn as well either left or right and also move backwards. How do we do that? I'm going to continue building on the same program that we started earlier. Let's say that we'd like to get the robot to move forwards maybe for one second and then turn.

To do that, I'm going to use the same block but this time, I'm going to use the turn right instruction and I'll give it again an arbitrary speed. Let's make it a 100 as well. I would like it to move forward again at speed 100. Then, I would like it to turn left also at speed 100. After it turns left, I would like to let it move forward for a little bit longer. Actually, let's make the backwards we've done the forwards step quite a few times. Let's get it to go back at speed 100.

Now, you may notice that there is a problem. I'll give you a few seconds to see if you can spot a problem with the current program the way it is. The problem is that, I've got the movement blocks without any weight blocks which means that the mBot basically is going to move from one to the other very quickly. Now, because the processor inside the mBot is fairly fast, it's not as fast as subprocessor inside a general purpose computer but for a microcontroller, 16 megahertz, it means that there's clock that ticks 16 million times per second and that's how many instructions it can execute. Its quite a lot.

The mBot is going to run through these instructions so quickly that we are basically not going to see any results until the end because we don't have a statement at the end of the program to stop the mBot, it's going to continue going backwards at speed 100 until we turned it off. What is missing from these are these time statements, the weight locks. Let's go get a few weight blocks from the control menu and just put them in here. Going to configure them in a minute but for now, I want to insert them that you can see what the final structure will almost be because I want in the end to get my robot to stop. I'm going to go back to the robots section and get one of these to run forward at speed zero to get my robot to stop.

I can change the directions. I'm just going to make them all one second so that when I put, eventually, the robot on the floor it doesn't move off too far and hits a wall, eventually. What my current program will do is to run forwards at speed 125 and do that for one second. It's going to turn right at speed 100. Do that for another second and forwards for another second, left for another second and then backwards for another second. Eventually, it will stop after that one second, the last one second elapses.

Let's upload it and try it out. Connect it to USB. You notice that I've turn my mBot off because the last program that we uploaded just starts automatically when I turn it on and then moves the wheels for five seconds. I turned it also that it doesn't run off the table when I now turned it on. I'm going to turn it on. There's a program kicking in. Going to turn it upside down so that it doesn't move off the table. There's a previous program five seconds going forwards and then it stops. I've got my new program here and you can see that the Arduino version of the program has been updated with the new instructions. I will connect to COM6 and connect it and upload to the Arduino. Uploading.

The first step is compilation, that's takes a bit of time. Once a compilation is finished, which means we've got the binary file, it will uploaded and start executing the program. You saw how the wheels started spinning. I'm going to remove another USB cable so I can see the program running independently of the computer. I'm going to turn off and then back on. Just have to look at the rotation of the two wheels. This is forwards and right turn, forwards, left turn and backwards and eventually, it stops. Let's take this over to the floor and try it out. To get it started, I'm going to turn off the robot and then turn it back on again. There you go. Right, forwards, left, backwards and stopped. Awesome. So far so good.

Now, let's have a look at some additional programming concepts now. I would like to introduce the concept of the variable. Notice one thing, notice that I've got speeds at 100 for these four blocks. These four blocks indicate that I'd like the speed here to be 100. What if I would like that speed to become 150. I would have to individually type that 150 in all these text boxes. It's tedious. Imagine if you had a lot more of these boxes that you had to alter. What I suggest at this point is that we introduce a variable. A variable is like a storage area that can contain a value. It could be a text value or it could be a number. In this case, I would like to store a number.

The first step is to create a variable and then I can use it. To create a variable in the scratch programming language we go into the data and blocks section of the script tab. You can see that I've got a couple of options here. The first one is to make a variable, the second one is to make a block. I'm going to talk about blocks later but for now, let's create a variable. Click on create a variable and it's asking for a name. I would like to use a obvious name such as, "wheel speed." It's always a good idea to name your variables, we're using an obvious name. What I mean by that is a name like this a one for example means nothing to the programmer and it will confuse people but a name such as, "wheel speed" is obvious as to what it really is about.

The two options down here for all sprite or for this sprite only basically say that this variable will be available to all your programs but don't worry about it because we're not using sprites anyway, we're using the mBot. Just accept the default for all sprites and hit okay. Now, we've got the wheel speed variable. In order to interact with these variable, we have access to a number of new blocks.

We want to set the wheel speed value to a particular number. To do that, we've got this block here. I'm going to drive this block and put it up here, the beginning of the program which is a reasonable place to set a new variable. You can set a variable to a number such as, as I said earlier, let's make it a 150. This is going to make a robot go quite a bit faster than it previously did.

You can also get values into your valuable from things like senses. Again, this is something that I'm going to show you later but for now let's just hard code this speed into the wheel speed variable using the set block. The next thing to do is, to update or to change the movement blocks so that instead of a fixed speed, we set it to the that is stored inside the wheel speed variable. To do that, we simply get the variable from the data and block section and move it across into the program. Put the left side of the wheel speed variable block, so that it can attach this on the textbooks. We can see that it highlights and when it highlight it means that you can then let go of your mouse and then the variable gets inserted into the text area. I can do that for the rest of the text areas. I like that. I'm going to leave the last one as zero because I want my robot eventually to stop.

While I’m at this, I'd like to show you one more trick. Let's say that I would also like to use the same variable to provide a speed value for the first run forwards block. The problem here is, you can see that right now I've got 125 which is not the same value as what I've got now stored in wheel speed. The run forward speed for the first block is 25 units smaller than the 150 value that I’ve stored in the wheel speed variable. What this means, is that I need a way to do a simple calculation like a subtraction.

I would like, for example, the speed by which the m-word moves forwards -- the first time that one as soon as I turned on to be 25 units smaller than the speed that I've stored in the wheel speed variable. It means that I need to use an operator. I'm going to go to the operator’s section. You can see that I've got a bunch of operators here. I’m going to talk about some of those later. But for now, I want to show you subtraction.

Here is a subtraction, you also have addition, multiplication and division. I can use that in order to achieve my objective here. There is my subtraction. I want to take my wheel speed, speed value, whatever I’ve stored inside this variable and subtract 25 from it like that. I'm going to take this block and use it to replace the fixed speed 125 in my first speed of movement block. Okay, that looks like it's complete. This is what I want to achieve for this iteration of the program. You can see that my program, the Arduino version has been updated. I've got my variable here, wheel speed 150. I’ve got the first movement instruction, which says whatever wheel speed you've set in this variable, subtract 25 from it. That then becomes the speed for both wheels and when the Arduino turns on.

Okay, let's upload the sketch. Plug in the USB cable to the Arduino. I’m going to turn it upside down so it doesn't fly off my table. Okay. Let's upload the sketch to the Arduino. Uploading. You can notice that the wheels are now spinning faster than before this, because now we've got the speed 150. See how easy it is to change the speed for all of the movements, for all the individual movements by just changing a single variable. Let's change that top speed. Let's make it 255 and see how fast that goes. Upload. That's the maximum speed 255. Great, that's what variables are useful for. I’m going to turn that down to maybe a 125. More reasonable speed for the amount of real estate that I have on the floor to work with and leave it at that.

Okay, great. I think at this point you are starting to get a good understanding of how movement can be achieved with the mBot. The next part of this crash course, I would like to talk about a very important programming concept that is the loop. We'll use the loops to do some interesting visual effects with the RGB LEDs.

